<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exam Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Exam Hub for tests, competitions, proctoring, and more.">
  <meta name="author" content="Exam Hub">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #007bff;
      --accent: #e3f2fd;
      --success: #28a745;
      --text: #212529;
      --light: #f8fbff;
    }
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background: var(--light);
      color: var(--text);
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    header {
      text-align: center;
      padding: 40px 20px;
      background: #ffffff;
      position: relative;
    }
    .logo {
      font-size: 2.8em;
      font-weight: bold;
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    .logo i {
      font-size: 1.2em;
    }
    .login {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
    }
    .login input {
      padding: 8px;
      border: 1px solid var(--accent);
      border-radius: 6px;
    }
    .login button {
      padding: 8px 14px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .login button:hover {
      background: #0056b3;
    }
    .logout {
      padding: 8px 14px;
      background: #d32f2f;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .logout:hover {
      background: #b71c1c;
    }
    .container {
      max-width: 1100px;
      margin: auto;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: var(--primary);
      font-size: 2.4em;
      margin-bottom: 30px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    .card {
      background: #fff;
      padding: 25px;
      border-radius: 16px;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0,123,255,0.1);
      text-align: center;
      transition: all 0.3s;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0,123,255,0.15);
    }
    .hidden {
      display: none;
    }
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }
    .back {
      background: var(--primary);
      color: white;
      margin-bottom: 20px;
    }
    .back:hover {
      background: #0056b3;
    }
    .delete {
      background: #d32f2f;
      color: white;
      margin-top: 10px;
    }
    .delete:hover {
      background: #b71c1c;
    }
    .add {
      background: var(--success);
      color: white;
    }
    .add:hover {
      background: #1e7e34;
    }
    input, textarea {
      width: 100%;
      margin-bottom: 15px;
      padding: 12px;
      border: 1px solid var(--accent);
      border-radius: 8px;
      font-size: 1em;
    }
    #search {
      max-width: 600px;
      margin: 0 auto 30px;
      display: block;
    }
    #admin-form {
      max-width: 600px;
      margin: 40px auto 0;
      padding: 30px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,123,255,0.1);
    }
    #admin-form h3 {
      color: var(--primary);
      text-align: center;
      margin-bottom: 20px;
    }
    .card strong {
      display: block;
      font-size: 1.2em;
      margin-bottom: 10px;
    }
    .card small {
      display: block;
      margin-top: 10px;
      color: #666;
    }
    @media (max-width: 768px) {
      .logo {
        font-size: 2.2em;
        flex-direction: column;
        gap: 10px;
      }
      .login {
        position: static;
        justify-content: center;
        margin-top: 20px;
      }
    }
    @media (max-width: 480px) {
      header {
        padding: 30px 15px;
      }
      .container {
        padding: 15px;
      }
    }
  </style>
</head>

<body>
<header>
  <div class="logo"><i class="fas fa-graduation-cap"></i> Exam Hub</div>
  <div id="login-form" class="login">
    <input id="username" placeholder="Username">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>
  <div id="logout" class="login hidden">
    <span id="admin-name"></span>
    <button class="logout" onclick="logout()">Logout</button>
  </div>
</header>

<div class="container">

<!-- SEARCH -->
<input id="search" placeholder="Search SAT, LSAT, DECA...">

<!-- CATEGORIES -->
<div id="categories" class="grid"></div>

<!-- SUBCATEGORIES -->
<div id="subcats" class="hidden">
  <button class="btn back" onclick="showCategories()">Back</button>
  <h2 id="subcat-title"></h2>
  <div id="subcat-grid" class="grid"></div>
</div>

<!-- PRODUCTS -->
<div id="products" class="hidden">
  <button class="btn back" onclick="showSubcats()">Back</button>
  <h2 id="product-title"></h2>
  <div id="product-grid" class="grid"></div>

  <div id="admin-form" class="hidden">
    <h3>Add Product</h3>
    <input id="p-title" placeholder="Title">
    <textarea id="p-desc" placeholder="Description"></textarea>
    <input id="p-rating" type="number" step="0.5" min="0" max="5" placeholder="Rating">
    <button class="btn add" onclick="addProduct()">Add</button>
  </div>
</div>

</div>

<script>
/* =======================
   DATA
======================= */
const categories = JSON.parse(localStorage.getItem('categories')) || {
  tests: ['sat','act','lsat','psat','dsat'],
  comps: ['deca','fbla','hosa','bpa','tsa'],
  proctor: ['examity','honorlock','proctorio','proctoru'],
  cheating: []
};

let currentCat = null;
let currentSub = null;
let isAdmin = localStorage.getItem('isAdmin') === 'true';

/* =======================
   HELPERS
======================= */
function key(cat, sub) {
  return `products_\( {cat}_ \){sub}`;
}

function updateAdminUI() {
  document.getElementById('login-form').classList.toggle('hidden', isAdmin);
  document.getElementById('logout').classList.toggle('hidden', !isAdmin);
  if (isAdmin) {
    document.getElementById('admin-name').textContent = 'Admin: zues50';
  }
  if (currentSub) loadProducts(currentSub);
}

/* =======================
   AUTH
======================= */
function login() {
  const user = document.getElementById('username').value;
  const pass = document.getElementById('password').value;
  if (user === 'zues50' && pass === 'zues12345') {
    isAdmin = true;
    localStorage.setItem('isAdmin', 'true');
    updateAdminUI();
  } else {
    alert('Invalid credentials');
  }
}

function logout() {
  isAdmin = false;
  localStorage.setItem('isAdmin', 'false');
  updateAdminUI();
}

/* =======================
   UI NAV
======================= */
function showCategories() {
  document.getElementById('categories').classList.remove('hidden');
  document.getElementById('subcats').classList.add('hidden');
  document.getElementById('products').classList.add('hidden');
}

function showSubcats() {
  document.getElementById('products').classList.add('hidden');
  document.getElementById('subcats').classList.remove('hidden');
}

/* =======================
   RENDER
======================= */
function renderCategories() {
  const el = document.getElementById('categories');
  el.innerHTML = '';
  Object.keys(categories).forEach(cat => {
    const c = document.createElement('div');
    c.className = 'card';
    c.textContent = cat.toUpperCase();
    c.onclick = () => loadSubcats(cat);
    el.appendChild(c);
  });
}

function loadSubcats(cat) {
  currentCat = cat;
  const grid = document.getElementById('subcat-grid');
  grid.innerHTML = '';
  document.getElementById('subcat-title').textContent = cat.toUpperCase();

  categories[cat].forEach(sub => {
    const c = document.createElement('div');
    c.className = 'card';
    c.textContent = sub.toUpperCase();
    c.onclick = () => loadProducts(sub);
    grid.appendChild(c);
  });

  document.getElementById('categories').classList.add('hidden');
  document.getElementById('subcats').classList.remove('hidden');
}

function loadProducts(sub) {
  currentSub = sub;
  document.getElementById('product-title').textContent =
    `${currentCat.toUpperCase()} → ${sub.toUpperCase()}`;

  const grid = document.getElementById('product-grid');
  grid.innerHTML = '';

  const products = JSON.parse(localStorage.getItem(key(currentCat, currentSub)) || '[]');

  products.forEach((p, i) => {
    const c = document.createElement('div');
    c.className = 'card';
    c.innerHTML = `<strong>\( {p.title}</strong><p> \){p.desc}</p><small>⭐ ${p.rating}</small>`;
    if (isAdmin) {
      const del = document.createElement('button');
      del.className = 'btn delete';
      del.textContent = 'Delete';
      del.onclick = () => deleteProduct(i);
      c.appendChild(del);
    }
    grid.appendChild(c);
  });

  document.getElementById('admin-form').classList.toggle('hidden', !isAdmin);
  document.getElementById('subcats').classList.add('hidden');
  document.getElementById('products').classList.remove('hidden');
}

/* =======================
   CRUD
======================= */
function addProduct() {
  const title = document.getElementById('p-title').value;
  const desc = document.getElementById('p-desc').value;
  const rating = document.getElementById('p-rating').value;

  if (!title) return alert('Title required');

  const storageKey = key(currentCat, currentSub);
  const products = JSON.parse(localStorage.getItem(storageKey) || '[]');

  products.push({
    title,
    desc,
    rating,
    category: currentCat,
    subcategory: currentSub
  });

  localStorage.setItem(storageKey, JSON.stringify(products));
  loadProducts(currentSub);

  document.getElementById('p-title').value = '';
  document.getElementById('p-desc').value = '';
  document.getElementById('p-rating').value = '';
}

function deleteProduct(i) {
  const storageKey = key(currentCat, currentSub);
  const products = JSON.parse(localStorage.getItem(storageKey));
  products.splice(i,1);
  localStorage.setItem(storageKey, JSON.stringify(products));
  loadProducts(currentSub);
}

/* =======================
   SEARCH (FIXED)
======================= */
document.getElementById('search').addEventListener('input', e => {
  const q = e.target.value.toLowerCase();
  if (!q) return;

  for (const cat in categories) {
    for (const sub of categories[cat]) {
      if (sub.startsWith(q)) {
        currentCat = cat;
        loadProducts(sub);
        e.target.value = '';
        return;
      }
    }
  }
});

/* =======================
   INIT
======================= */
renderCategories();
showCategories();
updateAdminUI();
</script>
</body>
</html>